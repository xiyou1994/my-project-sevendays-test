# Sentry ç§»é™¤æ€»ç»“

## âœ… å®ŒæˆçŠ¶æ€

æ‰€æœ‰ Sentry é”™è¯¯è¿½è¸ªé…ç½®å·²ä»é¡¹ç›®ä¸­å®Œå…¨ç§»é™¤ã€‚

## ğŸ“ åˆ é™¤çš„æ–‡ä»¶

1. **sentry.client.config.ts** - Sentry å®¢æˆ·ç«¯é…ç½®
2. **app/api/sentry-tunnel/route.ts** - Sentry/GlitchTip é”™è¯¯ä¸ŠæŠ¥éš§é“

## ğŸ”§ ä¿®æ”¹çš„æ–‡ä»¶

### 1. next.config.mjs
```diff
- import { withSentryConfig } from "@sentry/nextjs";
- export default withSentryConfig(finalConfig, { ... }, { ... });
+ export default finalConfig;
```

### 2. package.json
```diff
dependencies:
-  "@sentry/nextjs": "^10.22.0"
```

### 3. CLAUDE.md
ç§»é™¤äº†æ‰€æœ‰ Sentry ç›¸å…³çš„æ–‡æ¡£å¼•ç”¨:
- æŠ€æœ¯æ ˆä¸­çš„ "Error Tracking: Sentry"
- ç¯å¢ƒå˜é‡ä¸­çš„ SENTRY_AUTH_TOKEN å’Œ NEXT_PUBLIC_SENTRY_DSN
- æµ‹è¯•è°ƒè¯•éƒ¨åˆ†çš„ Sentry é…ç½®è¯´æ˜
- ç”Ÿäº§æ„å»ºéƒ¨åˆ†çš„ Sentry source maps è¯´æ˜

## ğŸ¯ å½±å“èŒƒå›´

### ç§»é™¤çš„åŠŸèƒ½
- è‡ªåŠ¨é”™è¯¯è¿½è¸ªå’ŒæŠ¥å‘Š
- GlitchTip é›†æˆ
- é”™è¯¯å †æ ˆä¸Šä¼ 
- Source map ä¸Šä¼ 

### ä¿ç•™çš„åŠŸèƒ½
- æ‰€æœ‰ä¸šåŠ¡åŠŸèƒ½æ­£å¸¸è¿è¡Œ
- æ§åˆ¶å°æ—¥å¿—ä»ç„¶å¯ç”¨ (lib/logger.ts)
- API è¯·æ±‚/å“åº”æ—¥å¿—æ­£å¸¸ (lib/axios-config.ts, lib/server-api-client.ts)

## âœ… éªŒè¯æ­¥éª¤

å·²å®Œæˆ:
1. âœ… åˆ é™¤ Sentry é…ç½®æ–‡ä»¶
2. âœ… åˆ é™¤ Sentry API éš§é“
3. âœ… ä» next.config.mjs ç§»é™¤ withSentryConfig
4. âœ… ä» package.json ç§»é™¤ä¾èµ–
5. âœ… æ›´æ–°é¡¹ç›®æ–‡æ¡£
6. âœ… é‡æ–°å®‰è£…ä¾èµ– (`pnpm install`)
7. âœ… éªŒè¯æ²¡æœ‰æ®‹ç•™ Sentry æ–‡ä»¶

## ğŸ“Š ä¾èµ–å˜åŒ–

```bash
# ç§»é™¤çš„åŒ…
- @sentry/nextjs (åŠå…¶æ‰€æœ‰å­ä¾èµ–)

# å‡å°‘çš„åŒ…æ•°é‡
- å‡å°‘ 124 ä¸ªåŒ…
+ å¢åŠ  7 ä¸ªåŒ… (ä¾èµ–æ ‘é‡æ–°è®¡ç®—)
```

## ğŸš€ åç»­æ“ä½œ

ç”¨æˆ·å¯ä»¥:
1. æ¸…ç†æ„å»ºç¼“å­˜: `rm -rf .next`
2. é‡æ–°æ„å»ºé¡¹ç›®: `pnpm build`
3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨æµ‹è¯•: `pnpm dev`

## ğŸ“ æ³¨æ„äº‹é¡¹

- é¡¹ç›®ä¸å†è‡ªåŠ¨æ”¶é›†å’Œä¸ŠæŠ¥é”™è¯¯
- å¦‚éœ€é”™è¯¯ç›‘æ§ï¼Œå¯ä»¥:
  - ä½¿ç”¨ Next.js å†…ç½®çš„é”™è¯¯è¾¹ç•Œ
  - æŸ¥çœ‹æœåŠ¡å™¨æ§åˆ¶å°æ—¥å¿—
  - ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·
  - è€ƒè™‘å…¶ä»–é”™è¯¯è¿½è¸ªæœåŠ¡ï¼ˆå¦‚ LogRocket, Bugsnag ç­‰ï¼‰

## âœ¨ æ€»ç»“

Sentry é”™è¯¯è¿½è¸ªåŠŸèƒ½å·²å®Œå…¨ä»é¡¹ç›®ä¸­ç§»é™¤ï¼ŒåŒ…æ‹¬:
- æ‰€æœ‰é…ç½®æ–‡ä»¶
- API éš§é“ç«¯ç‚¹
- NPM ä¾èµ–åŒ…
- æ–‡æ¡£å¼•ç”¨

é¡¹ç›®ç°åœ¨æ›´è½»é‡ï¼Œä¾èµ–æ›´å°‘ï¼Œæ„å»ºé€Ÿåº¦æ›´å¿«ã€‚

---

**å®Œæˆæ—¶é—´**: 2026-02-03
**å®æ–½è€…**: Claude Sonnet 4.5
**çŠ¶æ€**: âœ… å®Œæˆ
